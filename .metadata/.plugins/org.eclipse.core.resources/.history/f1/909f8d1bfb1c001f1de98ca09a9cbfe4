package com.techlabs.assignments;

import java.util.Scanner;

public class PigDiceRefactored {

    private static Scanner scanner = new Scanner(System.in);
    private static int totalScore = 0;
    private static int turnScore = 0;
    private static int turns = 0;
	
	public static void main(String[] args) {
		System.out.println("Let's Play PIG!\nSee how many turns it takes you to get to 20.\nTurn ends when you hold or roll a 1.\nIf you roll a 1, you lose all points for the turn.\nIf you hold, you save all points for the turn.\n\nLet's start!");
        
        while (true) {
            //printStatus();
        	
        	System.out.println("\nTurn: " + (turns + 1));
            System.out.println("Total score: " + totalScore);
    	    System.out.println("Turn score: " + turnScore);
    	    System.out.print("Roll or Hold? (r/h): ");
    	    
            String choice = scanner.nextLine();

            if (choice.equalsIgnoreCase("r")) {
                rollDice();
                if (totalScore >= 20) {
                    printWinMessage();
                    break;
                }
            }

            if (choice.equalsIgnoreCase("h")) {
                hold();
                if (totalScore >= 20) {
                    printWinMessage();
                    break;
                }
            }

            
        }

        scanner.close();
	}
	
//	private static void printStatus() {
//        System.out.println("\nTurn: " + (turns + 1));
//        System.out.println("Your total score: " + totalScore);
//	    System.out.println("Your turn score: " + turnScore);
//	    System.out.print("Do you want to roll or hold? (r/h): ");
//	}

	private static void rollDice() {
	    int roll = (int)(Math.random() * 6) + 1;
	    System.out.println("You rolled: " + roll);

	    if (roll == 1) {
	        turnScore = 0;
	        turns++;
	        System.out.println("Rolled a 1! Turn over. You lose all points for this turn.");
	        return;
        }

	    turnScore += roll;
	    System.out.println("Your turn score is now: " + turnScore);
	    
	    if(turnScore>=20) {
	    	printWinMessage();
	    	return;
	    }
    }

	private static void hold() {
		totalScore += turnScore;
	    turnScore = 0;
	    turns++;
	    System.out.println("You chose to hold. Your total score is now: " + totalScore);
	}

	private static void printWinMessage() {
	    System.out.println("Congratulations! You've reached 20 points and won the game!");
	    System.out.println("It took you " + (turns+1) + " turns to reach 20 points.");
	}
	
}
